/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package com.tuti

import com.tuti.api.TutiApiClient.setSingleThreaded
import com.tuti.api.TutiApiClient.setAuthToken
import com.tuti.api.data.PaymentToken.amount
import com.tuti.api.data.PaymentToken.paymentNote
import com.tuti.api.TutiApiClient.generatePaymentToken
import com.tuti.api.data.TutiResponse.getQRToken
import com.tuti.api.data.ResponseData.headers
import kotlin.jvm.JvmStatic
import com.tuti.api.TutiApiClient
import com.tuti.api.authentication.SignInRequest
import com.tuti.api.data.PaymentToken
import com.tuti.api.TutiApiClient.ResponseCallable
import com.tuti.api.data.TutiResponse
import com.tuti.api.data.ResponseData
import com.tuti.api.TutiApiClient.ErrorCallable
import java.lang.Exception

object Library {
    var jwt: String? = null
    @JvmStatic
    fun main(args: Array<String>) {
        val client = TutiApiClient()
        client.setSingleThreaded(true)
        val credentials = SignInRequest("0111493885", "Adonese=1994")
        client.setAuthToken("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJtb2JpbGUiOiIwMTExNDkzODg1IiwiZXhwIjoxNjYwNTIzMjIxLCJpc3MiOiJub2VicyJ9.ldFjkNHDGFtC9N-oSG9lIwEOQBlLNQ6ud_q9EIC3nvY")

//        client.SignIn(credentials,( signInResponse , rawResponse) -> {
//            User user = signInResponse.getUser();
//
//            System.out.println("User information from sign in endpoint (adonese case):\n"+user);
//        },( error, exception, rawResponse) -> {System.out.println(rawResponse.getHeaders());
//            System.out.println(rawResponse.getHeaders());});
        val paymentToken = PaymentToken()
        paymentToken.amount = 100
        paymentToken.paymentNote = "This is working"
        client.generatePaymentToken(
            paymentToken,
            ResponseCallable<TutiResponse> { res: TutiResponse, rawRes: ResponseData? ->
                println(
                    res.getQRToken()!!.amount
                )
            },
            ErrorCallable<TutiResponse> { error: TutiResponse?, exception: Exception?, rawResponse: ResponseData ->
                println(rawResponse.headers)
                println(rawResponse.headers)
            })
    }
}